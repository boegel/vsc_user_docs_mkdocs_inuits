
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>HPC-UGent GPU clusters { #ch:gpu_ugent} - VSC User Documentation - Gent</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ch:gpu_ugent" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="VSC User Documentation - Gent" class="md-header__button md-logo" aria-label="VSC User Documentation - Gent" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VSC User Documentation - Gent
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              HPC-UGent GPU clusters { #ch:gpu_ugent}
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../ch_introduction/" class="md-tabs__link">
        HPC Tutorial
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="VSC User Documentation - Gent" class="md-nav__button md-logo" aria-label="VSC User Documentation - Gent" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    VSC User Documentation - Gent
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          HPC Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="HPC Tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          HPC Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch_introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch_account/" class="md-nav__link">
        Getting an HPC Account
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ch_connecting/" class="md-nav__link">
        Connecting to the HPC infrastructure
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sec:gpu_ugent_jobs" class="md-nav__link">
    Submitting jobs
  </a>
  
    <nav class="md-nav" aria-label="Submitting jobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sec:gpu_ugent_interactive_jobs" class="md-nav__link">
    Interactive jobs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware" class="md-nav__link">
    Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sec:gpu_ugent_resources" class="md-nav__link">
    Requesting (GPU) resources
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sec:gpu_ugent_attention_points" class="md-nav__link">
    Attention points
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sec:gpu_ugent_software" class="md-nav__link">
    Software with GPU support
  </a>
  
    <nav class="md-nav" aria-label="Software with GPU support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sec:gpu_ugent_software_gromacs" class="md-nav__link">
    GROMACS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sec:gpu_ugent_software_horovod" class="md-nav__link">
    Horovod
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sec:gpu_ugent_software_pytorch" class="md-nav__link">
    PyTorch
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sec:gpu_ugent_software_tensorflow" class="md-nav__link">
    TensorFlow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sec:gpu_ugent_software_alphafold" class="md-nav__link">
    AlphaFold
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sec:gpu_ugent_help" class="md-nav__link">
    Getting help
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="ch:gpu_ugent"><abbr title="High Performance Computing, high performance computing and multiple-task computing on a supercomputer.">HPC</abbr>-UGent GPU clusters<a class="headerlink" href="#ch:gpu_ugent" title="Permanent link">#</a></h1>
<h2 id="sec:gpu_ugent_jobs">Submitting jobs<a class="headerlink" href="#sec:gpu_ugent_jobs" title="Permanent link">#</a></h2>
<p>To submit jobs to the <code>joltik</code> GPU <abbr title="A group of compute nodes.">cluster</abbr>, where each node provides 4
NVIDIA V100 GPUs (each with 32GB of GPU memory), use:</p>
<p>::: prompt
:::</p>
<p>To submit to the <code>accelgor</code> GPU <abbr title="A group of compute nodes.">cluster</abbr>, where each node provides 4
NVIDIA A100 GPUs (each with 80GB GPU memory), use:</p>
<p>::: prompt
:::</p>
<p>Then use the familiar <code>qsub</code>, <code>qstat</code>, etc. commands, taking into
account the guidelines outlined in
section <a href="#sec:gpu_ugent_resources">1.3</a>{reference-type="ref"
reference="sec:gpu_ugent_resources"}.</p>
<h3 id="sec:gpu_ugent_interactive_jobs">Interactive jobs<a class="headerlink" href="#sec:gpu_ugent_interactive_jobs" title="Permanent link">#</a></h3>
<p>To interactively experiment with GPUs, you can submit an interactive job
using <code>qsub -I</code> (and request one or more GPUs, see
section <a href="#sec:gpu_ugent_resources">1.3</a>{reference-type="ref"
reference="sec:gpu_ugent_resources"}).</p>
<p>Note that due to a bug in Slurm you will currently not be able to be
able to interactively use MPI software that requires access to the GPUs.
If you need this, please contact use via .</p>
<h2 id="hardware">Hardware<a class="headerlink" href="#hardware" title="Permanent link">#</a></h2>
<p>See <a href="https://www.ugent.be/hpc/en/infrastructure">https://www.ugent.be/hpc/en/infrastructure</a>.</p>
<h2 id="sec:gpu_ugent_resources">Requesting (GPU) resources<a class="headerlink" href="#sec:gpu_ugent_resources" title="Permanent link">#</a></h2>
<p>There are 2 main ways to ask for GPUs as part of a job:</p>
<ul>
<li>
<p>Either as a node property (similar to the number of cores per node
    specified via <code>ppn</code>) using <code>-l nodes=X:ppn=Y:gpus=Z</code> (where the
    <code>ppn=Y</code> is optional), or as a separate resource request (similar to
    the amount of memory) via <code>-l gpus=Z</code>. Both notations give exactly
    the same result. The <code>-l gpus=Z</code> is convenient is you only need one
    node and you are fine with the default number of cores per GPU. The
    <code>-l nodes=...:gpus=Z</code> notation is required if you want to run with
    full control or in multinode cases like MPI jobs. If you do not
    specify the number of GPUs by just using <code>-l gpus</code>, you get by
    default 1 GPU.</p>
</li>
<li>
<p>As a resource of it's own, via <code>--gpus X</code>. In this case however, you
    are <em>not</em> guaranteed that the GPUs are on the same node, so your
    script or code must be able to deal with this.</p>
</li>
</ul>
<p>Some background:</p>
<ul>
<li>
<p>The GPUs are constrained to the jobs (like the CPU cores), but do
    not run in so-called "exclusive" mode.</p>
</li>
<li>
<p>The GPUs run with the so-called "persistence daemon", so the GPUs is
    not re-initialised between jobs.</p>
</li>
</ul>
<h2 id="sec:gpu_ugent_attention_points">Attention points<a class="headerlink" href="#sec:gpu_ugent_attention_points" title="Permanent link">#</a></h2>
<p>Some important attention points:</p>
<ul>
<li>
<p>For MPI jobs, we recommend the (new) wrapper <code>mypmirun</code> from the
    <code>vsc-mympirun</code> module (<code>pmi</code> is the background mechanism to start
    the MPI tasks, and is different from the usual <code>mpirun</code> that is used
    by the <code>mympirun</code> wrapper). At some later point, we <em>might</em> promote
    the <code>mypmirun</code> tool or rename it, to avoid the confusion in the
    naming).</p>
</li>
<li>
<p>Sharing GPUs requires MPS. The Slurm built-in MPS does not really do
    want you want, so we will provide integration with <code>mypmirun</code> and
    <code>wurker</code>.</p>
</li>
<li>
<p>For parallel work, we are working on a <code>wurker</code> wrapper from the
    <code>vsc-mympirun</code> module that supports GPU placement and MPS, without
    any limitations wrt the requested resources (i.e. also support the
    case where GPUs are spread heterogenous over nodes from using the
    <code>--gpus Z</code> option).</p>
</li>
<li>
<p>Both <code>mypmirun</code> and <code>wurker</code> will try to do the most optimised
    placement of cores and tasks, and will provide 1 (optimal) GPU per
    task/MPI rank, and set one so-called <em>visible device</em> (i.e.
    <code>CUDA_VISIBLE_DEVICES</code> only has 1 ID). The actual devices are not
    constrained to the ranks, so you can access all devices requested in
    the job. <em>We know that at this moment, this is not working properly,
    but we are working on this. We advise against trying to fix this
    yourself.</em></p>
</li>
</ul>
<h2 id="sec:gpu_ugent_software">Software with GPU support<a class="headerlink" href="#sec:gpu_ugent_software" title="Permanent link">#</a></h2>
<p>Use <code>module avail</code> to check for centrally installed software.</p>
<p>The subsections below only cover a couple of installed software
packages, more are available.</p>
<h3 id="sec:gpu_ugent_software_gromacs">GROMACS<a class="headerlink" href="#sec:gpu_ugent_software_gromacs" title="Permanent link">#</a></h3>
<p>Please consult <code>module avail GROMACS</code> for a list of installed versions.</p>
<h3 id="sec:gpu_ugent_software_horovod">Horovod<a class="headerlink" href="#sec:gpu_ugent_software_horovod" title="Permanent link">#</a></h3>
<p>Horovod can be used for (multi-node) multi-GPU TensorFlow/PyTorch
calculations.</p>
<p>Please consult <code>module avail Horovod</code> for a list of installed versions.</p>
<p>Horovod supports TensorFlow, Keras, PyTorch and MxNet (see
<a href="https://github.com/horovod/horovod#id9">https://github.com/horovod/horovod#id9</a>), but should be run as an MPI
application with <code>mypmirun</code>. (Horovod also provides it's own wrapper
<code>horovodrun</code>, not sure if it handles placement and others correctly).</p>
<p>At least for simple TensorFlow benchmarks, it looks like Horovod is a
bit faster than usual autodetect multi-GPU TensorFlow without horovod,
but it comes at the cost of the code modifications to use horovod.</p>
<h3 id="sec:gpu_ugent_software_pytorch">PyTorch<a class="headerlink" href="#sec:gpu_ugent_software_pytorch" title="Permanent link">#</a></h3>
<p>Please consult <code>module avail PyTorch</code> for a list of installed versions.</p>
<h3 id="sec:gpu_ugent_software_tensorflow">TensorFlow<a class="headerlink" href="#sec:gpu_ugent_software_tensorflow" title="Permanent link">#</a></h3>
<p>Please consult <code>module avail TensorFlow</code> for a list of installed
versions.</p>
<h4 id="sec:gpu_ugent_software_tensorflow_example_job_script">Example TensorFlow job script<a class="headerlink" href="#sec:gpu_ugent_software_tensorflow_example_job_script" title="Permanent link">#</a></h4>
<h3 id="sec:gpu_ugent_software_alphafold">AlphaFold<a class="headerlink" href="#sec:gpu_ugent_software_alphafold" title="Permanent link">#</a></h3>
<p>Please consult <code>module avail AlphaFold</code> for a list of installed
versions.</p>
<p>For more information on using AlphaFold, we strongly recommend the
VIB-UGent course available at
<a href="https://elearning.bits.vib.be/courses/alphafold">https://elearning.bits.vib.be/courses/alphafold</a>.</p>
<h2 id="sec:gpu_ugent_help">Getting help<a class="headerlink" href="#sec:gpu_ugent_help" title="Permanent link">#</a></h2>
<p>In case of questions or problems, please contact the via , and clearly
indicate that your question relates to the <code>joltik</code> <abbr title="A group of compute nodes.">cluster</abbr> by adding
<code>[joltik]</code> in the email subject.</p>

              
            </article>
            
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.expand", "navigation.tracking", "toc.follow", "navigation.sections", "search.suggest", "navigation.instant", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>